---
layout: single
title: SQL injection vulnerability allowing login bypass – PortSwigger Write Up
excerpt: "En este post vamos a estar resolviendo el laboratorio de PortSwigger: “SQL injection vulnerability allowing login bypass."
date: 2022-09-03
classes: wide
#header:
#  teaser: /assets/images/portswigger/stored_xss_into_html_context_with_nothing_encoded/portada.png
#  teaser_home_page: true
categories:
  - Portswigger
tags:
  - SQL Injection
  - Apprentice
---

En este post vamos a estar resolviendo el laboratorio de PortSwigger: "SQL injection vulnerability allowing login bypass."

## Pasos

Dirígete a la página de inicio de sesión.

<p align="center">
     <img src="/assets/images/portswigger/sql_injection_vulnerability_allowing_login_bypass/1.png" width="1000">
</p><br>

Cuando ingresamos un nombre de usuario y contraseña, la cadena de consulta se verá así:


```plaintext
❯ SELECT * FROM users WHERE username = ‘administrator’ AND password = ‘password’
```

Ingresé una comilla simple en el nombre de usuario e inicio de sesión (lo mismo con la contraseña). Ambos dan como resultado un error interno del servidor, lo que muestra que podría ser vulnerable a la inyección de SQL.


<p align="center">
     <img src="/assets/images/portswigger/sql_injection_vulnerability_allowing_login_bypass/2.png" width="1000">
</p><br>


En este caso si ingreso: `administrator’` or `1=1--`

La cadena de consulta:

```plaintext
❯ SELECT * FROM users WHERE username = ‘administrator' or 1=1--’ AND password = ‘password’
```

Independientemente de si ‘administrator’es un nombre de usuario válido o no, ya 1=1que siempre devolverá verdadero y --comentará el resto de la declaración. Esto significa que podré iniciar sesión con el primer usuario según la tabla de usuarios.


<p align="center">
     <img src="/assets/images/portswigger/sql_injection_vulnerability_allowing_login_bypass/3.png" width="1000">
</p><br>


o si ingresamos:

`administrator’ or 1=1--`

```plaintext
❯ SELECT * FROM users WHERE username = ‘administrator'--’ AND password = ‘password’
```

En la consulta anterior, esta vez, dado que 'AND password = ‘password’está comentado y el nombre de usuario es 'administrador', nos iniciará en la cuenta de administrador.


<p align="center">
     <img src="/assets/images/portswigger/sql_injection_vulnerability_allowing_login_bypass/4.png" width="1000">
</p><br>

De esta forma, conseguimos resolver el laboratorio:

<p align="center">
     <img src="/assets/images/portswigger/sql_injection_vulnerability_allowing_login_bypass/5.png" width="1000">
</p><br>


<p align="center">
     <img src="/assets/images/portswigger/sql_injection_vulnerability_allowing_login_bypass/6.png" width="1000">
</p><br>


¡Un saludo y espero que os sirva de apoyo!
